\documentclass{article}
\begin{document}
\begin{verbatim}
(deftemplate goal (action object from to))
(deftemplate in (object location))
\end{verbatim}
\begin{verbatim}
(deffacts world
  (in :object robot :location A)
  (in :object box :location B)
  (goal :action push :object box :from B :to A))
\end{verbatim}
\begin{verbatim}
(defrule stop
  (goal :object ?x :to ?y)
  (in :object ?x :location ?y)
=>
  (halt))
\end{verbatim}
\begin{verbatim}
(defrule move
  (goal :object ?x :from ?y)
  (in :object ?x :location ?y)
  (- in :object robot :location ?y)
  (in :object robot :location ?z)
=>
  (modify (in :object robot :location ?z)
          (in :object robot :location ?y)))
\end{verbatim}
\begin{verbatim}
(defrule push
  (goal :object ?x :from ?y :to ?z)
  (in :object ?x :location ?y)
  (in :object robot :location ?y)
=>
  (modify (in :object robot :location ?y)
          (in :object robot :location ?z))
  (modify (in :object ?x :location ?y)
          (in :object ?x :location ?z)))
\end{verbatim}
\begin{verbatim}
(reset)
==> Activation MOVE:
\end{verbatim}
\begin{verbatim}
(run)
Firing Activation MOVE:
<== (IN (OBJECT . ROBOT) (LOCATION . A))
==> (IN (OBJECT . ROBOT) (LOCATION . B))
==> Activation PUSH:
\end{verbatim}
\begin{verbatim}
Firing Activation PUSH:
<== (IN (OBJECT . ROBOT) (LOCATION . B))
==> (IN (OBJECT . ROBOT) (LOCATION . A))
<== (IN (OBJECT . BOX) (LOCATION . B))
==> (IN (OBJECT . BOX) (LOCATION . A))
==> Activation STOP:
\end{verbatim}
\begin{verbatim}
Firing Activation STOP:
((GOAL (ACTION . PUSH) (OBJECT . BOX) (FROM . B) (TO . A))
 (IN (OBJECT . BOX) (LOCATION . A)))
Halting
\end{verbatim}
\end{document}
